sudo: false
addons:
  apt:
    packages:
    - ant-optional

language: ruby
rvm:
  - jruby-1.7.26
  - jruby-9.0.5.0
  - jruby-9.1.17.0
#branches:
#  only:
#    - master
services:
  - redis-server
env:
  - resque="master" delayed_job="~>4.1" activerecord="~>4.2.6"
  - resque="~>1.25.2" delayed_job="~>4.0.6" activerecord="~>4.2"
  - resque="~>1.24.1" delayed_job="~>3.0" # activerecord="~>3.2"
  - resque="~>1.26.0" delayed_job="~>4.1.2" activerecord="~>4.2"
allowed_failures:
  - env: resque="~>1.26.0" delayed_job="~>4.1.2" activerecord="~>4.2"
  - rvm: jruby-9.1.16.0
  include:
    - rvm: jruby-9.1.16.0
      env: resque="~>1.27.4" delayed_job="4.1.5" activerecord="~>5.1.6"
    - rvm: jruby-9.1.16.0
      env: resque="1.27.2" delayed_job="~>4.1" activerecord="~>5.0.5"
